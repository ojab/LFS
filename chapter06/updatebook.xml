<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch06-updatebook">
  <title>Update the book</title>
  <?dbhtml filename="updatebook.html" dir="chapter06"?>

  <para>When you're going to update the book by adding a new package to it,
    here's how you do it:</para>

  <itemizedlist>

    <listitem><para>Assign yourself to the bug for this new package (you'll find
      it in Bug #30's Dependency Tree. See previous section).</para>
    </listitem>

    <listitem><para>Download the package to shadowfax in your home directory.
      If it's not bzip2'ed, then make it so.</para>
    </listitem>

    <listitem><para>Test build an LFS system to make sure this package compiles
      properly in an LFS environment. Don't use your regular workstation's
      environment - it may be sufficiently different for the compilation to
      abort.  A package may depend on something that you have installed but
      which doesn't come with the LFS-Book. Also keep in mind that some packages
      are used twice, in chapter 5 and in chapter 6.</para>
    </listitem>

    <listitem><para>Update the installation instructions in the book if
      necessary.</para>
    </listitem>

    <listitem><para>When the package compiles properly and the package works too
      (doesn't seg. fault or show other errors when trying to execute programs
      from it), then open the <filename>entities/packagename.ent</filename> in
      an editor.</para>
    </listitem>

    <listitem><para>Find the <emphasis>package-version</emphasis> entity and
      update its value to the new version. Don't change the
      <emphasis>package-depversion</emphasis> and
      <emphasis>package-contentversion</emphasis> unless you re-checked the
      dependencies and contents of the new version.</para>
    </listitem>

    <listitem><para>Run <userinput>ls -l package-version.tar.bz2</userinput> on
      the file you have in your home directory on shadowfax. Divide the
      filesize by <emphasis>1024</emphasis> to get the number of Kilobytes.
      Round off to the nearest Kilobyte and update the
      <emphasis>package-size</emphasis> entity.</para>
    </listitem>

    <listitem><para>Commit changes to CVS and continue immediately with the next
      section which will update the LFS FTP archive.</para>
    </listitem>
  </itemizedlist>
</sect1>
